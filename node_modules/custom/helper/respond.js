global.respond=function(req,res,view,data){

    //req.xhr || req.headers.accept.indexOf('json') > -1
    //(req.headers["x-requested-with"] == 'XMLHttpRequest')

    if((req.xhr || req.headers.accept.indexOf('json') > -1) && typeof req.query.getJustPageCenter != 'undefined'){
        data['getJustPageCenter']=true;
        res.render(view,data );

    }else   if ((req.xhr || req.headers.accept.indexOf('json') > -1) && req.query.getJsonData != undefined) {

        res.setHeader('Content-Type', 'application/json');
        res.send(JSON.stringify(data));
    } else {
       res.render(view,data );
    }


}


global.redirectRespond=function(req,res,url,result){


    if(req.xhr || req.headers.accept.indexOf('json') > -1){

        res.setHeader('Content-Type', 'application/json');
        res.send(JSON.stringify(result));

    } else {
        res.redirect(url);
    }


}